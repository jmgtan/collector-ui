[{"/Users/jmgtan/work/collector-ui/src/index.js":"1","/Users/jmgtan/work/collector-ui/src/reportWebVitals.js":"2","/Users/jmgtan/work/collector-ui/src/App.js":"3","/Users/jmgtan/work/collector-ui/src/components/LoginComponent.js":"4","/Users/jmgtan/work/collector-ui/src/Config.js":"5","/Users/jmgtan/work/collector-ui/src/auth/AuthContext.js":"6","/Users/jmgtan/work/collector-ui/src/components/NavbarComponent.js":"7","/Users/jmgtan/work/collector-ui/src/auth/Principal.js":"8","/Users/jmgtan/work/collector-ui/src/exceptions/InvalidTokenException.js":"9","/Users/jmgtan/work/collector-ui/src/components/HomeComponent.js":"10","/Users/jmgtan/work/collector-ui/src/components/AdminComponent.js":"11","/Users/jmgtan/work/collector-ui/src/components/AuthComponent.js":"12"},{"size":500,"mtime":1607512247595,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":1607512247596,"results":"15","hashOfConfig":"14"},{"size":1095,"mtime":1607613217161,"results":"16","hashOfConfig":"14"},{"size":2142,"mtime":1607613331197,"results":"17","hashOfConfig":"14"},{"size":127,"mtime":1607657630069,"results":"18","hashOfConfig":"14"},{"size":167,"mtime":1607516016865,"results":"19","hashOfConfig":"14"},{"size":1600,"mtime":1607613348172,"results":"20","hashOfConfig":"14"},{"size":2177,"mtime":1607609272742,"results":"21","hashOfConfig":"14"},{"size":167,"mtime":1607657707662,"results":"22","hashOfConfig":"14"},{"size":131,"mtime":1607603630603,"results":"23","hashOfConfig":"14"},{"size":134,"mtime":1607603735364,"results":"24","hashOfConfig":"14"},{"size":1055,"mtime":1607613396063,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1xvseao",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"28"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"28"},"/Users/jmgtan/work/collector-ui/src/index.js",[],["55","56"],"/Users/jmgtan/work/collector-ui/src/reportWebVitals.js",[],"/Users/jmgtan/work/collector-ui/src/App.js",["57","58","59","60","61"],"import logo from './logo.svg';\nimport './App.css';\nimport LoginComponent from './components/LoginComponent';\nimport HomeComponent from './components/HomeComponent';\nimport AdminComponent from './components/AdminComponent';\nimport NavbarComponent from './components/NavbarComponent';\nimport AuthComponent from './components/AuthComponent';\nimport {AuthContext, useAuthContext} from './auth/AuthContext';\nimport {useEffect, useState} from 'react';\nimport {BrowserRouter, Switch, Route} from 'react-router-dom';\n\n\nfunction App() {\n  // const [principal, setPrincipal] = useState();\n\n  return (\n    <AuthComponent>\n        <BrowserRouter>\n          <NavbarComponent></NavbarComponent>\n          <div class=\"container\">\n            <Switch>\n              <Route path=\"/\" exact component={LoginComponent}></Route>\n              <Route path=\"/secured/main\" exact component={HomeComponent}></Route>\n              <Route path=\"/secured/admin/users\" exact component={AdminComponent}></Route>\n            </Switch>\n          </div>\n        </BrowserRouter>\n    </AuthComponent>\n  );\n}\n\nexport default App;\n","/Users/jmgtan/work/collector-ui/src/components/LoginComponent.js",["62"],"import React, {useEffect, useState} from 'react';\nimport Config from '../Config';\nimport {useAuthContext} from '../auth/AuthContext';\nconst axios = require('axios');\n\nfunction LoginComponent() {\n    const [username, setUsername] = useState();\n    const [password, setPassword] = useState();\n    const [validationError, setValidationError] = useState();\n\n    const {principal, setPrincipal} = useAuthContext();\n\n    async function doLogin(event) {\n        event.preventDefault();\n        setValidationError(null);\n        try {\n            const loginResponse = await axios.post(Config.backend+\"/auth/login\", {username: username, password: password});    \n            const token = loginResponse.data.token;\n            await principal.reloadProfileWithNewToken(token);\n            setPrincipal(principal);\n    \n            window.location = \"/secured/main\";\n        } catch (e) {\n            setValidationError(\"Username and password do not match\");\n        }\n\n    }\n\n    return  (\n        <div class=\"row\">\n            <div class=\"col-3\"></div>\n            <div class=\"col-6\">\n                <div class=\"mt-3 mb-3\">\n                    <h1 class=\"display-6\">Sign In</h1>\n                </div>\n                {validationError ? <div class=\"alert alert-danger\">{validationError}</div> : null}\n                <form onSubmit={doLogin}>\n                    <div class=\"mb-3\">\n                        <label for=\"username\" class=\"form-label\">Username</label>\n                        <input type=\"text\" class=\"form-control form-control-lg\" value={username} onChange={e => setUsername(e.target.value)} />\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"password\" class=\"form-label\">Password</label>\n                        <input type=\"password\" class=\"form-control form-control-lg\" value={password} onChange={e => setPassword(e.target.value)} />\n                    </div>\n                    <button class=\"btn btn-primary\" type=\"submit\">Login</button>\n                </form>\n            </div>\n            <div class=\"col-3\"></div>\n        </div>\n    );\n}\n\nexport default LoginComponent;","/Users/jmgtan/work/collector-ui/src/Config.js",[],"/Users/jmgtan/work/collector-ui/src/auth/AuthContext.js",[],"/Users/jmgtan/work/collector-ui/src/components/NavbarComponent.js",["63"],"import React from 'react';\nimport {useAuthContext} from '../auth/AuthContext';\nimport {Link} from 'react-router-dom';\n\nfunction NavbarComponent() {\n    const {principal} = useAuthContext();\n\n    function logout() {\n        principal.reset();\n        window.location = \"/\";\n\n    }\n\n    if (!principal.authenticated)\n        return null;\n\n    return (\n        <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <div class=\"container\">\n                <a class=\"navbar-brand\" href=\"/\">Collector UI</a>\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarToggle\" aria-controls=\"navbarToggle\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span class=\"navbar-toggler-icon\"></span>\n                </button>\n                <div class=\"collapse navbar-collapse\" id=\"navbarToggle\">\n                    <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                        <li class=\"nav-item\">\n                            <Link to=\"/secured/main\" className=\"nav-link\">Home</Link>\n                        </li>\n                        <li class=\"nav-item\">\n                            <Link to=\"/secured/admin/users\" className=\"nav-link\">Admin</Link>\n                        </li>\n                    </ul>\n                    <div class=\"d-flex\">\n                        Logged in as {principal.profile.username} [<a href=\"#\" onClick={logout} class=\"link-primary\">Logout</a>]\n                    </div>\n                </div>\n            </div>\n        </nav>\n    );\n}\n\nexport default NavbarComponent;","/Users/jmgtan/work/collector-ui/src/auth/Principal.js",[],"/Users/jmgtan/work/collector-ui/src/exceptions/InvalidTokenException.js",[],"/Users/jmgtan/work/collector-ui/src/components/HomeComponent.js",[],"/Users/jmgtan/work/collector-ui/src/components/AdminComponent.js",[],"/Users/jmgtan/work/collector-ui/src/components/AuthComponent.js",["64","65","66","67","68","69"],"import React, {Component, useEffect, useState} from 'react';\nimport Principal from '../auth/Principal';\nimport {AuthContext, useAuthContext} from '../auth/AuthContext';\nimport {Redirect} from 'react-router-dom';\n\n\nfunction AuthComponent(props) {\n    const [principal, setPrincipal] = useState();    \n    const path = window.location.pathname;\n\n    let pr = principal;\n    \n    useEffect(async() => {\n        if (pr == null) {\n            \n            pr = new Principal();\n            pr.initFromStorage()\n                .then(() => {\n                    setPrincipal(pr);\n                });\n        }\n    });\n\n    if (pr != null) {\n\n        if (path == \"/\" && principal.authenticated) {\n            window.location = \"/secured/main\";\n        } else if (path.startsWith(\"/secured\") && !principal.authenticated) {\n            window.location = \"/\";\n        } else {\n            return (\n                <AuthContext.Provider value={{principal, setPrincipal}} {...props} />\n            );\n        }\n    }\n\n    return null;\n}\n\nexport default AuthComponent;",{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","severity":1,"message":"75","line":1,"column":8,"nodeType":"76","messageId":"77","endLine":1,"endColumn":12},{"ruleId":"74","severity":1,"message":"78","line":8,"column":9,"nodeType":"76","messageId":"77","endLine":8,"endColumn":20},{"ruleId":"74","severity":1,"message":"79","line":8,"column":22,"nodeType":"76","messageId":"77","endLine":8,"endColumn":36},{"ruleId":"74","severity":1,"message":"80","line":9,"column":9,"nodeType":"76","messageId":"77","endLine":9,"endColumn":18},{"ruleId":"74","severity":1,"message":"81","line":9,"column":20,"nodeType":"76","messageId":"77","endLine":9,"endColumn":28},{"ruleId":"74","severity":1,"message":"80","line":1,"column":16,"nodeType":"76","messageId":"77","endLine":1,"endColumn":25},{"ruleId":"82","severity":1,"message":"83","line":34,"column":68,"nodeType":"84","endLine":34,"endColumn":118},{"ruleId":"74","severity":1,"message":"85","line":1,"column":16,"nodeType":"76","messageId":"77","endLine":1,"endColumn":25},{"ruleId":"74","severity":1,"message":"79","line":3,"column":22,"nodeType":"76","messageId":"77","endLine":3,"endColumn":36},{"ruleId":"74","severity":1,"message":"86","line":4,"column":9,"nodeType":"76","messageId":"77","endLine":4,"endColumn":17},{"ruleId":"87","severity":1,"message":"88","line":13,"column":15,"nodeType":"89","endLine":22,"endColumn":6},{"ruleId":"87","severity":1,"message":"90","line":16,"column":18,"nodeType":"91","endLine":16,"endColumn":33},{"ruleId":"92","severity":1,"message":"93","line":26,"column":18,"nodeType":"94","messageId":"95","endLine":26,"endColumn":20},"no-native-reassign",["96"],"no-negated-in-lhs",["97"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'AuthContext' is defined but never used.","'useAuthContext' is defined but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'Component' is defined but never used.","'Redirect' is defined but never used.","react-hooks/exhaustive-deps","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","ArrowFunctionExpression","Assignments to the 'pr' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","NewExpression","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-global-assign","no-unsafe-negation"]